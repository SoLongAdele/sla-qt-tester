# SLA Qt Tester


âš™ï¸ **SLA Qt Tester** - æ™ºèƒ½è§†è§‰é©±åŠ¨çš„ Qt æµ‹è¯•å¹³å°

## åŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½åˆ†ç±» | åŠŸèƒ½æè¿° | åŠŸèƒ½ç»†èŠ‚ |
|:---------|:---------|:---------|
| **é¡¹ç›®ç®¡ç†** | Qt é¡¹ç›®æ‰«æ | è‡ªåŠ¨æ‰«æè¯†åˆ« QMake (.pro) å’Œ CMake é¡¹ç›®ï¼Œæå–é¡¹ç›®ä¿¡æ¯ |
| | æ–‡ä»¶æµè§ˆå™¨ | æ ‘å½¢ç»“æ„å±•ç¤ºé¡¹ç›®æ–‡ä»¶ï¼Œæ”¯æŒ VS Code é£æ ¼å›¾æ ‡ |
| | æ–‡ä»¶é¢„è§ˆ | Shiki è¯­æ³•é«˜äº®ï¼Œæ”¯æŒ C++/CMake/JSON ç­‰ï¼Œè¡Œå·æ˜¾ç¤ºä¸è¡Œé«˜äº®è·³è½¬ |
| **å•å…ƒæµ‹è¯•** | æµ‹è¯•æ‰«æ | æ‰«æ `tests/` ç›®å½•ä¸‹ `test_*.cpp` æ–‡ä»¶ï¼Œè§£ææµ‹è¯•ç”¨ä¾‹ |
| | æµ‹è¯•æ‰§è¡Œ | è¿è¡Œå•ä¸ª/æ‰¹é‡æµ‹è¯•ï¼Œæ”¯æŒ Qt Test æ¡†æ¶è¾“å‡ºè§£æ |
| | UI æµ‹è¯•å½•åˆ¶ | è‡ªåŠ¨æˆªå›¾è®°å½• UI æµ‹è¯•è¿‡ç¨‹ï¼Œæˆªå›¾å­˜å…¥æ•°æ®åº“ |
| | AI å¤±è´¥åˆ†æ | è°ƒç”¨è®¯é£æ˜Ÿç« AI åˆ†æå¤±è´¥åŸå› ï¼Œç”Ÿæˆä¿®å¤å»ºè®® |
| **é™æ€åˆ†æ** | Cppcheck é›†æˆ | è‡ªåŠ¨æ£€æµ‹/å®‰è£… cppcheckï¼Œæ”¯æŒä¸€é”®åˆ†æ |
| | æ£€æŸ¥ç±»å‹é…ç½® | 7 ç§æ£€æŸ¥ç±»å‹å¯é€‰ï¼šwarning/style/performance/portability ç­‰ |
| | é«˜çº§å‚æ•° | æ”¯æŒå¹¶è¡Œçº¿ç¨‹ã€ç›®æ ‡å¹³å°ã€C++ æ ‡å‡†ç­‰é…ç½® |
| | é—®é¢˜å®šä½ | æŒ‰ä¸¥é‡ç¨‹åº¦/ç±»å‹åˆ†ç±»ï¼ŒåŒå‡»è·³è½¬ä»£ç ä½ç½®å¹¶é«˜äº® |
| **è§†è§‰æµ‹è¯•** | æ¨¡æ¿åŒ¹é… | OpenCV æ¨¡æ¿åŒ¹é…ï¼Œæ”¯æŒé˜ˆå€¼å’Œ ROI åŒºåŸŸè®¾ç½® |
| | é¢œè‰²åŒ¹é… | HSV é¢œè‰²ç©ºé—´åŒ¹é…ï¼Œæ”¯æŒé¢œè‰²èŒƒå›´å’Œæœ€å°åƒç´ æ•° |
| | Pipeline å¼•æ“ | JSON é…ç½®é©±åŠ¨çš„æµ‹è¯•æµæ°´çº¿ï¼Œæ”¯æŒæ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯ |
| | AI è‡ªåŠ¨åŒ– | è‡ªç„¶è¯­è¨€ç”Ÿæˆ Pipeline é…ç½®ï¼ŒAI é©±åŠ¨æµ‹è¯•æ‰§è¡Œ |
| **å†å²è®°å½•** | æµ‹è¯•å†å² | é¡¹ç›®çº§/å…¨å±€å†å²è®°å½•ï¼Œå«ç”¨ä¾‹è¯¦æƒ…å’Œæˆªå›¾ |
| | æ‰¹é‡æ“ä½œ | å¤šé€‰åˆ é™¤ã€HTML æŠ¥å‘Šå¯¼å‡º |
| | AI æŠ¥å‘Šå­˜æ¡£ | AI åˆ†æç»“æœæŒä¹…åŒ–ï¼Œæ”¯æŒ Markdown æ¸²æŸ“æŸ¥çœ‹ |

## æ ¸å¿ƒæ¨¡å—æŠ€æœ¯æ ˆ

### ğŸ§ª å•å…ƒæµ‹è¯•é›†æˆ

| å±‚çº§ | æŠ€æœ¯å®ç° |
|:-----|:---------|
| å‰ç«¯ | React ç»„ä»¶ (`UnitTestPanel.tsx`) + TypeScript API å°è£… |
| é€šä¿¡ | PyWebView JS Bridge å¼‚æ­¥ RPC è°ƒç”¨ |
| åç«¯ | Python æµ‹è¯•æ‰«æå™¨ + Qt Test è¾“å‡ºè§£æå™¨ |
| æ•°æ® | SQLite æ•°æ®åº“å­˜å‚¨è¿è¡Œè®°å½•ã€ç”¨ä¾‹è¯¦æƒ…ã€æˆªå›¾ |
| AI | è®¯é£æ˜Ÿç« API è¿›è¡Œå¤±è´¥åŸå› åˆ†æ |

### ğŸ” é™æ€ä»£ç åˆ†æ

| å±‚çº§ | æŠ€æœ¯å®ç° |
|:-----|:---------|
| å‰ç«¯ | React é…ç½®é¢æ¿ + é—®é¢˜åˆ—è¡¨/è¯¦æƒ…åŒæ å¸ƒå±€ |
| å·¥å…· | Cppcheck é™æ€åˆ†æå™¨ï¼ŒXML æ ¼å¼è¾“å‡ºè§£æ |
| åç«¯ | Python å°è£… cppcheck å‘½ä»¤è¡Œè°ƒç”¨ï¼Œç»“æœåˆ†ç±»ç»Ÿè®¡ |
| äº¤äº’ | é—®é¢˜ä½ç½® â†’ æ–‡ä»¶é¢„è§ˆè¡Œé«˜äº®è·³è½¬ |

### ğŸ¯ è§†è§‰æµ‹è¯•å¼•æ“

| å±‚çº§ | æŠ€æœ¯å®ç° |
|:-----|:---------|
| è¯†åˆ« | OpenCV æ¨¡æ¿åŒ¹é… + HSV é¢œè‰²åŒ¹é… |
| æ§åˆ¶ | pyautogui é¼ æ ‡é”®ç›˜æ¨¡æ‹Ÿ |
| æµç¨‹ | Pipeline JSON é…ç½®å¼•æ“ï¼Œæ”¯æŒèŠ‚ç‚¹è·³è½¬å’Œæ¡ä»¶åˆ†æ”¯ |
| AI | è®¯é£æ˜Ÿç« API è‡ªç„¶è¯­è¨€ â†’ Pipeline JSON ç”Ÿæˆ |

### ğŸ“š å†å²è®°å½•ç®¡ç†

| å±‚çº§ | æŠ€æœ¯å®ç° |
|:-----|:---------|
| å­˜å‚¨ | SQLite ä¸‰è¡¨ç»“æ„ï¼štest_runs / test_case_details / test_screenshots |
| æŸ¥è¯¢ | æ”¯æŒé¡¹ç›®ç­›é€‰ã€åˆ†é¡µã€ç»Ÿè®¡èšåˆ |
| å¯¼å‡º | HTML æ¨¡æ¿æ¸²æŸ“ï¼Œå«æµ‹è¯•è¯¦æƒ…å’Œ Base64 æˆªå›¾ |
| æ¸…ç† | å®šæ—¶æ¸…ç†è¿‡æœŸè®°å½• |

## è§†è§‰æµ‹è¯•æŠ€æœ¯æ–‡æ¡£

- [Pipeline ç”¨æˆ·æŒ‡å—](core/vision/PIPELINE_USER_GUIDE.md) - Pipeline JSON é…ç½®è¯­æ³•ä¸ä½¿ç”¨è¯´æ˜
- [æŠ€æœ¯å®ç°è¯¦è§£](core/vision/TECHNICAL_IMPLEMENTATION.md) - è§†è§‰è¯†åˆ«ç®—æ³•ä¸æ¶æ„è®¾è®¡
- [è§†è§‰æ¨¡å—æ¦‚è¿°](core/vision/README.md) - æ¨¡å—ç»“æ„ä¸ API è¯´æ˜

## å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ é…ç½®è®¯é£æ˜Ÿç« API Key

é¡¹ç›®ä½¿ç”¨è®¯é£æ˜Ÿç« AI è¿›è¡Œå•å…ƒæµ‹è¯•å¤±è´¥åˆ†æã€‚

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API é…ç½®ï¼š
```bash
SPARK_API_KEY=your_api_key_here
SPARK_BASE_URL=http://maas-api.cn-huabei-1.xf-yun.com/v1
SPARK_MODEL=xop3qwen1b7
```

3. è·å– API Keyï¼šè®¿é—® [è®¯é£æ˜Ÿç«å¹³å°](https://xinghuo.xfyun.cn/) ç”³è¯·

**æ³¨æ„**ï¼š`.env` æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­ï¼Œä¸ä¼šè¢«æäº¤åˆ° Gitã€‚

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# å®‰è£… Python ä¾èµ–ï¼ˆä½¿ç”¨ uvï¼‰
uv venv
source .venv/bin/activate  # macOS/Linux
# .venv\Scripts\activate   # Windows
uv pip install -r requirements.txt

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend && pnpm i && cd ..
```

### 3ï¸âƒ£ å¯åŠ¨å¼€å‘

```bash
python run_dev.py
```

è‡ªåŠ¨å¯åŠ¨ Viteï¼ˆç«¯å£ 9033ï¼‰+ PyWebView çª—å£

### 4ï¸âƒ£ ç”Ÿäº§æ„å»º

```bash
cd frontend && pnpm build && cd ..
python app.py
```

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆçº¯ Pythonï¼‰
â”œâ”€â”€ backend/           # PyWebView + JS Bridge
â”œâ”€â”€ frontend/          # Vite + React å‰ç«¯
â”œâ”€â”€ app.py             # ç”Ÿäº§å…¥å£
â””â”€â”€ run_dev.py         # å¼€å‘å…¥å£
```

## æŠ€æœ¯æ ˆ

**å‰ç«¯**: Vite + React 19 + TypeScript + TailwindCSS 4  
**åç«¯**: Python 3.10+ + PyWebView 5.0+

## ç»§ç»­å¼€å‘

### æ·»åŠ æ–° API

1. `core/` å®ç°ä¸šåŠ¡é€»è¾‘
2. `backend/api.py` æš´éœ²æ–¹æ³•
3. `frontend/src/api/py.ts` æ·»åŠ ç±»å‹
4. å‰ç«¯è°ƒç”¨

> è¯·æ³¨æ„ï¼Œæ¥å£è¿‡å¤šæ—¶è¦æœ‰è½¯ä»¶å·¥ç¨‹ç»„ç»‡ï¼Œå»ºè®®æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„ç®¡ç†ï¼Œé¿å…å…¨éƒ¨å †ç§¯åœ¨å•ä¸€æ–‡ä»¶ä¸­ï¼

### ä¿®æ”¹é…ç½®

`backend/config.py`:
```python
WINDOW_TITLE = "My App"
WINDOW_WIDTH = 1280
DEV_SERVER_PORT = 9033  # å¼€å‘ç«¯å£
```

`frontend/vite.config.ts` ä¸­çš„ `server.port` ä¹Ÿéœ€è¦ä¿æŒä¸€è‡´ã€‚

## Qt é¡¹ç›®æµ‹è¯•ç¼–è¯‘

### ç¼–è¯‘æµ‹è¯•é¡¹ç›®

é¡¹ç›®ä½¿ç”¨ CMake æ„å»º Qt æµ‹è¯•ï¼Œ**å¿…é¡»åœ¨ `build` ç›®å½•ä¸­æ„å»º**ï¼š

```bash
# è¿›å…¥ Qt é¡¹ç›®ç›®å½•
cd playground/diagramscene_ultima

# åˆ›å»ºå¹¶è¿›å…¥ build ç›®å½•
mkdir -p build && cd build

# é…ç½® CMakeï¼ˆæŒ‡å®š Qt è·¯å¾„ï¼‰
cmake -DCMAKE_PREFIX_PATH=/Users/ç”¨æˆ·å/Qt/6.x.x/macos ..

# ç¼–è¯‘
cmake --build .

# è¿è¡Œæµ‹è¯•
./tests/test_ui_interaction
# æˆ–è¿è¡Œæ‰€æœ‰æµ‹è¯•
ctest --verbose
```

### é‡è¦è¯´æ˜

1. **å¿…é¡»åœ¨ build ç›®å½•æ„å»º**ï¼šä¸è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ç›´æ¥è¿è¡Œ `cmake .`
2. **Qt è·¯å¾„**ï¼šæ ¹æ®ä½ çš„ Qt å®‰è£…ä½ç½®è°ƒæ•´ `CMAKE_PREFIX_PATH`
3. **å¯æ‰§è¡Œæ–‡ä»¶ä½ç½®**ï¼šæ„å»ºåçš„æµ‹è¯•åœ¨ `build/tests/` ç›®å½•
4. **æ¸…ç†æ„å»º**ï¼š`rm -rf build` å³å¯æ¸…ç†æ‰€æœ‰æ„å»ºäº§ç‰©

### è®¾ç½® Qt ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

ä¸ºé¿å…æ¯æ¬¡æŒ‡å®š Qt è·¯å¾„ï¼Œå¯åœ¨ `~/.zshrc` æ·»åŠ ï¼š

```bash
export CMAKE_PREFIX_PATH="/Users/ä½ çš„ç”¨æˆ·å/Qt/6.x.x/macos:$CMAKE_PREFIX_PATH"
export PATH="/Users/ä½ çš„ç”¨æˆ·å/Qt/6.x.x/macos/bin:$PATH"
```

ç„¶åï¼š
```bash
source ~/.zshrc
cd playground/diagramscene_ultima/build
cmake .. && cmake --build .
```

## åº”ç”¨æ‰“åŒ…

```bash
# å®‰è£…æ‰“åŒ…å·¥å…·
uv pip install pyinstaller

# å…ˆæ„å»ºå‰ç«¯
cd frontend && pnpm build && cd ..

# æ‰“åŒ…åº”ç”¨
pyinstaller --name="PyWebViewApp" \
  --windowed \
  --add-data="frontend/dist:frontend/dist" \
  --hidden-import=webview \
  app.py

# è¾“å‡ºåœ¨ dist/PyWebViewApp.app (macOS)
```

## è‡´è°¢
- [MAA](https://maa.plus)
- [Elecmonkey](https://www.elecmonkey.com)